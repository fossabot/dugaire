# Build Docker images with custom packages

Build an image and run a container with `vim` and `curl`.

```
docker run -it --rm $(dugaire build -apt=vim,curl)
```

Build an image and run a container with `vim`, `python3`, `pip3` and `ansible`.

```
docker run -it --rm $(dugaire build -apt=vim,python3-pip -pip3=ansible)
```

Build an image and run a container with `vim`, `kubectl v1.15.0`.

```
docker run -it --rm $(dugaire build -apt=vim --with-kubectl=1.15.0)
```

# Install (on Linux)

Clone this repository.

```
git clone git@github.com:tadeugr/dugaire.git
```

`cd` to its directory.

```
cd dugaire
```

Install it.

```
make install
```

You should have the command available.

```
dugaire build --help
```

# Usage

```
Usage: dugaire build [OPTIONS]

  Build Docker images with custom packages.

  Examples:

  Build an image and install vim using apt-get.

  $ dugaire build -apt=vim,curl

  Build an image and install vim using apt-get.

  $ dugaire build -apt=python3-pip -pip3=ansible

  Build an image and install the latest version of kubectl.

  $ dugaire build --with-kubectl=latest

Options:
  -apt, --apt-install TEXT        Comma separeted list of packages (no blank
                                  space). Example: -apt=curl,vim

  -pip3, --pip3-install TEXT      Comma separeted list of packages (no blank
                                  space). Example: -pip3=ansible,jinja2

  --with-kubectl TEXT             Install kubectl version. Examples: --with-
                                  kubectl=latest / --with-kubectl=1.17.0

  -n, --name TEXT                 Image name.  [default: random]
  --dry-run                       Do not build image.  [default: False]
  -o, --output [image-id|image-name|dockerfile]
                                  Command output options.  [default: image-id]
  --help                          Show this message and exit.
```

# Supported features

## Base images

* `ubuntu:18.04`

## Package/Dependency managers

* `apt-get`

* `pip3`

## Packages

* `kubectl`

# Useful commands

## List images generated by dugaire

```
docker images -f label='builtwith=dugaire'
```